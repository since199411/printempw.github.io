<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />


<meta name="theme-color" content="#3C8DBC">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="HandheldFriendly" content="True" />


<meta name="description" content="这里是 @printempw 的个人博客，基本上啥都写：开发心得分享，日常吐槽吹逼，偶尔也会写正经文字，欢迎订阅。" />

  <meta name="keywords" content="621sama, printempw, blog, 博客, 独立博客, Hexo" />




<meta name="google-site-verification" content="WUNRfYChNMDduwLOFHG41TsVrre6BOaI7jKshEvtRts" />



<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">


<meta name="generator" content="Hexo" />


<meta name="description" content="这里是 @printempw 的个人博客，基本上啥都写：开发心得分享，日常吐槽吹逼，偶尔也会写正经文字，欢迎订阅。">
<meta property="og:type" content="website">
<meta property="og:title" content="Blessing Studio">
<meta property="og:url" content="https://blessing.studio/page/8/index.html">
<meta property="og:site_name" content="Blessing Studio">
<meta property="og:description" content="这里是 @printempw 的个人博客，基本上啥都写：开发心得分享，日常吐槽吹逼，偶尔也会写正经文字，欢迎订阅。">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Blessing Studio">
<meta name="twitter:description" content="这里是 @printempw 的个人博客，基本上啥都写：开发心得分享，日常吐槽吹逼，偶尔也会写正经文字，欢迎订阅。">
<meta name="twitter:creator" content="@printempw">





  <link rel="alternate" href="/atom.xml" title="Blessing Studio">



  <link rel="canonical" href="https://blessing.studio/page/8/"/>



<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="icon" sizes="192x192" href="/images/icon.png" />
<link rel="apple-touch-icon" sizes="144x144" href="/images/touch-icon.png" />


<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/libs/fancybox/source/jquery.fancybox.css">
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">


<link rel="stylesheet" type="text/css" href="https://fonts.cat.net/css?family=Alegreya" />
<link rel="stylesheet" type="text/css" href="https://fonts.cat.net/css?family=Alegreya+SC" />
<link rel="stylesheet" type="text/css" href="https://fonts.cat.net/css?family=Roboto+Slab">
<link rel="stylesheet" type="text/css" href="https://fonts.cat.net/css?family=PT+Serif">


    <title>Blessing Studio - (ゝω·)~ kira</title>
  </head>

  <body lang="zh-CN">

    <div id="pageframe" class="fw">
      <script type="text/javascript" src="/js/nanobar.js"></script>
<script type="text/javascript">
    /* Initial NanoBar */
    var nanobar = new Nanobar({
        bg: "#BEDBEC",
        target: document.getElementById("pageframe"),
        id: "inb"
    });
</script>


      <div id="top" class="fw clf">
        <div id="header" class="wc center">
  <div class="logo-container left">
    
    <div class="logo left">
      <a href="https://blessing.studio"><img src="/images/logo.png"></a>
    </div>
  </div>

  <div class="social right">
    
    <div class="ico right" id="tg-s"><a href="javascript:void()" class="fa fa-search"></a></div>
    <form role="search" method="get" id="searchform-top" action="https://www.google.com/search">
      <input type="hidden" name="sitesearch" value="https://blessing.studio">
      <input type="text" name="q" id="s-top" placeholder="搜一搜 (ゝω·)☆ " />
    </form>

    
    <div id="toggler" class="right">
      
        
          <div class="ico">
            <a href="https://twitter.com/printempw" target="_blank" title="Twitter" class="fa fa-twitter"></a>
          </div>
        
          <div class="ico">
            <a href="https://github.com/printempw" target="_blank" title="GitHub" class="fa fa-github"></a>
          </div>
        
      
      <div class="ico">
        <a href="/atom.xml" target="_blank" class="fa fa-rss" ></a>
      </div>
    </div>

    <div class="ico right" id="tg-m"><a href="javascript:;" class="fa fa-bars"></a></div>
  </div>

  <div class="topmenu left">
    <div class="menu-container">
      <ul class="menu">
  
    
    <li class="menu-item menu-item-tech">
      <a href="/categories/tech/" title="提高姿势水平" rel="section">
      技术
      </a>
    </li>
  
    
    <li class="menu-item menu-item-archive">
      <a href="/archives/" title="总览历史文章" rel="section">
      归档
      </a>
    </li>
  
    
    <li class="menu-item menu-item-kaomoji">
      <a href="javascript:void;" title="点我点我" rel="section">
      (´・ω・`)
      </a>
    </li>
  
</ul>

    </div>
  </div>
  <div class="left clf"></div>

</div>

      </div>

      <div id="container" class="wc center clf 
   page-home 
">
        <script type="text/javascript">nanobar.go(20);</script>

        <div id="content" class="wp">
          
  
    

    <article class="post post-type-normal hentry">
      <h2 class="post-title">
        <a href="/happy-chinese-new-year/">新年快乐！</a>
      </h2>

      <div class="post-content">
        
          <p>祝诸君阖家欢乐，万事如意。</p>

        
      </div>

      <div class="post-meta clf">
  <span class="pmt pms fa-book">
    
      <a class="category-link" href="/categories/diary/">日常</a>
    
  </span>
  <span class="pmt pms fa-clock-o">2016-02-08</span>
  <span class="pmt pms fa-eye">
    <span id="post-view" data="happy-chinese-new-year/">Loading</span> Hits
  </span>
  <span class="pmt pms extra fa-tag">
    
      无标签
    
  </span>
</div>

    </article>
  
    

    <article class="post post-type-normal hentry">
      <h2 class="post-title">
        <a href="/add-page-view-counter-for-ghost-blog/">为 Ghost 博客添加页面访问计数器</a>
      </h2>

      <div class="post-content">
        
          <p>博客搬迁到 Ghost 后，原来的 Post Views 无法显示一直是窝的一大心病。</p>
<p>众所周知 Ghost 是使用模板语言 handlebars 来开发主题的，这也就造成了主题开发者们很难输出一些动态内容，而只能使用其内置的助手函数输出有限的可变内容。</p>
<p>总不能就这样下去吧，于是窝经过了一番搜索，找到了这个东西 —— <a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener">不算子</a>。</p>
<p>看来困扰于静态页面访问计数的不止窝一个啊。然而看了一下，不算子并不提供可调用的 API，也就是说窝没办法在文章分页上显示每篇文章的点击数了。</p>
<p>这怎么行？于是窝动了自己写计数服务的念头。</p>
          <a class="more-link" href="/add-page-view-counter-for-ghost-blog/#more">阅读全文&rarr;</a>
        
      </div>

      <div class="post-meta clf">
  <span class="pmt pms fa-book">
    
      <a class="category-link" href="/categories/tech/">技术</a>
    
  </span>
  <span class="pmt pms fa-clock-o">2016-01-31</span>
  <span class="pmt pms fa-eye">
    <span id="post-view" data="add-page-view-counter-for-ghost-blog/">Loading</span> Hits
  </span>
  <span class="pmt pms extra fa-tag">
    
      <a class="tag-link" href="/tag/Ghost/">Ghost</a>, <a class="tag-link" href="/tag/博客/">博客</a>
    
  </span>
</div>

    </article>
  
    

    <article class="post post-type-normal hentry">
      <h2 class="post-title">
        <a href="/mail-log-to-conoha-user-center-after-ddos/">VPS 被 DDoS 后与 ConoHa 客服的邮件记录</a>
      </h2>

      <div class="post-content">
        
          <p>挺醉的。翻译如下：</p>
<hr>
<blockquote>
<p>(お客様センター) - 2016/01/23 22:21</p>
</blockquote>
<blockquote>
<p>ご担当者 様</p>
</blockquote>
<blockquote>
<p>いつもご利用いただき、まことにありがとうございます。</p>
</blockquote>
<blockquote>
<p>ConoHa お客様センターです。</p>
</blockquote>
<blockquote>
<p>突然のご連絡失礼いたします。</p>
</blockquote>
<blockquote>
<p>このたびお客様にご利用いただいておりますVPSに対して、<br>外部からの不正なトラフィック（DDOS攻撃）を検知いたしました。</p>
</blockquote>
<blockquote>
<p>IPv4アドレス ：157.7.108.189</p>
</blockquote>
<blockquote>
<p>大変恐縮ではございますが、他のご利用者様への影響が懸念される<br>状況となっておりましたので、該当VPSに対する外部からの通信を<br>すべてDropするようにさせていただきました。</p>
</blockquote>
<blockquote>
<p>サービスの安定運用上、何卒ご了承くださいますよう、お願い<br>申しあげます。</p>
</blockquote>
<blockquote>
<p>今後ともConoHaをよろしくお願いいたします。</p>
</blockquote>
<p>(客服中心) - 2016/01/23 22:21</p>
<p>尊敬的用户</p>
<p>非常感谢您一直以来的使用，这里是 ConoHa 客服中心。</p>
<p>突然的通知失礼了。</p>
<p>这次对于我们为您提供的 VPS，发现了外来的异常流量（DDOS攻击）。</p>
<p>IPv4 地址 ：157.7.108.189</p>
<p>虽然很过意不去，但是由于不知道是否会对其他使用者造成影响，所以我们将被攻击的 VPS 的外部通信全部 Drop 了。</p>
<p>为了对服务的稳定而进行的操作，敬请谅解。</p>
<p>今后也请多多关照 ConoHa。</p>
          <a class="more-link" href="/mail-log-to-conoha-user-center-after-ddos/#more">阅读全文&rarr;</a>
        
      </div>

      <div class="post-meta clf">
  <span class="pmt pms fa-book">
    
      <a class="category-link" href="/categories/essay/">随笔</a>
    
  </span>
  <span class="pmt pms fa-clock-o">2016-01-31</span>
  <span class="pmt pms fa-eye">
    <span id="post-view" data="mail-log-to-conoha-user-center-after-ddos/">Loading</span> Hits
  </span>
  <span class="pmt pms extra fa-tag">
    
      <a class="tag-link" href="/tag/VPS/">VPS</a>, <a class="tag-link" href="/tag/吐槽/">吐槽</a>
    
  </span>
</div>

    </article>
  
    

    <article class="post post-type-normal hentry">
      <h2 class="post-title">
        <a href="/hello-ghost-goodbye-wordpress/">Hello Ghost, goodbye Wordpress</a>
      </h2>

      <div class="post-content">
        
          <p>虽然以前就一直想要弃用 WordPress 了，但是由于没有时间<del>（懒）</del> ，而且也是对这个完善的 CMS 有了感情。</p>
<p>然而在 ConoHa 的 VPS 被 DDoS 而搬迁至 DigitalOcean 后，我奇怪的发现 WordPress 的响应速度慢了很多。TTFB 甚至达到了史无前例的 16s。</p>
<p>对于这种情况，我第一个想到的就是数据库的锅。然而看了慢查询日志，导出 wp query 却发现问题不在数据库查询上。</p>
<p>后来又使用了排除大法，最终将问题定位于我所使用的 Seventeen 主题上。</p>
<p>看来是主题中做了什么耗费大量 CPU 时间的事件，导致前后台响应慢成狗（默认主题没事）。</p>
<p>要知道同样内存，ConoHa 和 DigitalOcean 的 CPU 配置可不只差了一点半点。这也是我最初选择 ConoHa 的原因之一。</p>
<p>然而发生了这档子事，反正我是再也不会去用 ConoHa 了。</p>
<p>那么怎么办呢？活人总不能让尿憋死吧。</p>
          <a class="more-link" href="/hello-ghost-goodbye-wordpress/#more">阅读全文&rarr;</a>
        
      </div>

      <div class="post-meta clf">
  <span class="pmt pms fa-book">
    
      <a class="category-link" href="/categories/diary/">日常</a>
    
  </span>
  <span class="pmt pms fa-clock-o">2016-01-31</span>
  <span class="pmt pms fa-eye">
    <span id="post-view" data="hello-ghost-goodbye-wordpress/">Loading</span> Hits
  </span>
  <span class="pmt pms extra fa-tag">
    
      <a class="tag-link" href="/tag/Ghost/">Ghost</a>, <a class="tag-link" href="/tag/WordPress/">WordPress</a>, <a class="tag-link" href="/tag/博客/">博客</a>
    
  </span>
</div>

    </article>
  
    

    <article class="post post-type-normal hentry">
      <h2 class="post-title">
        <a href="/welcome-to-ghost/">Welcome to Ghost</a>
      </h2>

      <div class="post-content">
        
          <p>You’re live! Nice. We’ve put together a little post to introduce you to the Ghost editor and get you started. You can manage your content by signing in to the admin area at <code>&lt;your blog URL&gt;/ghost/</code>. When you arrive, you can select this post from a list on the left and see a preview of it on the right. Click the little pencil icon at the top of the preview to edit this post and read the next section!</p>
<h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><p>Ghost uses something called Markdown for writing. Essentially, it’s a shorthand way to manage your post formatting as you write!</p>
<p>Writing in Markdown is really easy. In the left hand panel of Ghost, you simply write as you normally would. Where appropriate, you can use <em>shortcuts</em> to <strong>style</strong> your content. For example, a list:</p>
<ul>
<li>Item number one</li>
<li>Item number two<ul>
<li>A nested item</li>
</ul>
</li>
<li>A final item</li>
</ul>
<p>or with numbers!</p>
<ol>
<li>Remember to buy some milk</li>
<li>Drink the milk</li>
<li>Tweet that I remembered to buy the milk, and drank it</li>
</ol>
<h3 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h3><p>Want to link to a source? No problem. If you paste in a URL, like <a href="http://ghost.org" target="_blank" rel="noopener">http://ghost.org</a> - it’ll automatically be linked up. But if you want to customise your anchor text, you can do that too! Here’s a link to <a href="http://ghost.org" target="_blank" rel="noopener">the Ghost website</a>. Neat.</p>
          <a class="more-link" href="/welcome-to-ghost/#more">阅读全文&rarr;</a>
        
      </div>

      <div class="post-meta clf">
  <span class="pmt pms fa-book">
    
      <a class="category-link" href="/categories/diary/">日常</a>
    
  </span>
  <span class="pmt pms fa-clock-o">2016-01-31</span>
  <span class="pmt pms fa-eye">
    <span id="post-view" data="welcome-to-ghost/">Loading</span> Hits
  </span>
  <span class="pmt pms extra fa-tag">
    
      <a class="tag-link" href="/tag/Ghost/">Ghost</a>, <a class="tag-link" href="/tag/博客/">博客</a>
    
  </span>
</div>

    </article>
  
    

    <article class="post post-type-normal hentry">
      <h2 class="post-title">
        <a href="/ssh-over-proxy/">通过 Socks5 代理进行 SSH 连接</a>
      </h2>

      <div class="post-content">
        
          <p>为什么要写这个呢？</p>
<p>这次 ConoHa 把我被 DDoS 的 VPS 所有对外连接 DROP 了。最开始是所有的连接都 DROP，只有控制台的 VNC 才连的上。连上以后只能 Ping 到内网。</p>
<p>所幸后来放宽了 DROP，日本的 IP 可以访问了。于是借用了同学的搭建于 ConoHa 的 Shadowsocks，准备把数据备份下来（ConoHa 删除被 D 主机不是一次两次了）。</p>
<p>那么要怎么样才能通过代理进行 SSH 连接呢？窝起先以为是像 curl 那样提供了参数，不曾想 man ssh 未果，只好 Google 解决方法。不过大部分都是搜到了 SSH 代理的教程，找了挺久的，为了让后来人少走弯路，遂记录一下。</p>
<p>下面介绍的是 connect 的使用方法，Corkscrew 可以看<a href="http://www.techrepublic.com/blog/linux-and-open-source/using-corkscrew-to-tunnel-ssh-over-http/" target="_blank" rel="noopener">这篇</a>。</p>
<h3 id="0x01-下载并安装-connect"><a href="#0x01-下载并安装-connect" class="headerlink" title="0x01 下载并安装 connect"></a>0x01 下载并安装 connect</h3><p>这是 connect 的 Bitbucket <a href="https://bitbucket.org/gotoh/connect/src" target="_blank" rel="noopener">项目地址</a>。</p>
<p>如果你是 Linux/Mac 用户，克隆项目到本地（然而窝不用 Mercurial），编译安装：</p>
<pre><code class="bash">$ hg clone https://bitbucket.org/gotoh/connect 
$ cd connect 
$ make &amp;&amp; make install
</code></pre>
<p>也可以：</p>
<pre><code class="bash">$ gcc connect.c -o connect 
$ cp connect /usr/local/bin
</code></pre>
<p>如果你是 Windows 下的 Cygwin 用户，直接下载发行的<a href="https://bitbucket.org/gotoh/connect/downloads" target="_blank" rel="noopener">二进制文件</a>到 <code>C:/Windows</code> 中即可</p>
<h3 id="0x02-配置-SSH"><a href="#0x02-配置-SSH" class="headerlink" title="0x02 配置 SSH"></a>0x02 配置 SSH</h3><p>如果你使用的是 socks5 代理（Shadowsocks），添加这两行到 <code>~/.ssh/config</code></p>
<pre><code>Host * 
    ProxyCommand connect -H 127.0.0.1:1080 %h %p
</code></pre><p>如果你是使用 HTTP 代理，将 -H 改为 -S。</p>
<h3 id="0x03-连接"><a href="#0x03-连接" class="headerlink" title="0x03 连接"></a>0x03 连接</h3><p><img src="https://img.blessing.studio/images/2016/01/2016-01-24_08-19-25.png" alt="success"></p>
<p>成功</p>
<hr>
<p><del>装逼地使用了十六进制的标题序号</del></p>

        
      </div>

      <div class="post-meta clf">
  <span class="pmt pms fa-book">
    
      <a class="category-link" href="/categories/tech/">技术</a>
    
  </span>
  <span class="pmt pms fa-clock-o">2016-01-25</span>
  <span class="pmt pms fa-eye">
    <span id="post-view" data="ssh-over-proxy/">Loading</span> Hits
  </span>
  <span class="pmt pms extra fa-tag">
    
      <a class="tag-link" href="/tag/SSH/">SSH</a>
    
  </span>
</div>

    </article>
  
    

    <article class="post post-type-normal hentry">
      <h2 class="post-title">
        <a href="/fuck-you-conoha/">临时迁移至 DigitalOcean</a>
      </h2>

      <div class="post-content">
        
          <p>由于 ConoHa 的 VPS 被 DDoS，被 DROP 了除日本 IP 外的所有连接，故紧急迁移至 DigitalOcean。同时导致了从昨晚 21 时到今天早上 10 点之间的服务不可用。</p>
<p>发了 Tickets，ConoHa 客服至今没有回应，看来星期天客服不上班是真的了<img src="https://img.blessing.studio/images/2016/01/2016-01-24_07-30-08.jpg" alt="QQ图片20160124152956"></p>
<p>遂临时迁移至 DigitalOcean。所有数据迁移后，发现 WordPress 的响应变得非常慢，TTFB 长时间大于 20s。经过排查，将问题锁定至主题。由于 DO 主频的问题，原先的 Seventeen 主题中不知道有什么占用了大量 CPU 时间的操作，导致响应时间延长。</p>
<p>遂换回 WordPress 默认主题 Twenty Fifteen。</p>
<p>不知道 ConoHa 的傻逼客服什么时候才会回复。</p>
<blockquote>
<p>– (お客様センター) – 2016/01/23 22:21<br> ご担当者 様</p>
<p>いつもご利用いただき、まことにありがとうございます。<br> ConoHa お客様センターです。</p>
<p>突然のご連絡失礼いたします。</p>
<p>このたびお客様にご利用いただいておりますVPSに対して、<br> 外部からの不正なトラフィック（DDOS攻撃）を検知いたしました。</p>
<p>IPv4アドレス ：157.7.108.189</p>
<p>大変恐縮ではございますが、他のご利用者様への影響が懸念される<br> 状況となっておりましたので、該当VPSに対する外部からの通信を<br> すべてDropするようにさせていただきました。</p>
<p>サービスの安定運用上、何卒ご了承くださいますよう、お願い<br> 申しあげます。</p>
<p>今後ともConoHaをよろしくお願いいたします。</p>
</blockquote>

        
      </div>

      <div class="post-meta clf">
  <span class="pmt pms fa-book">
    
      <a class="category-link" href="/categories/diary/">日常</a>
    
  </span>
  <span class="pmt pms fa-clock-o">2016-01-24</span>
  <span class="pmt pms fa-eye">
    <span id="post-view" data="fuck-you-conoha/">Loading</span> Hits
  </span>
  <span class="pmt pms extra fa-tag">
    
      <a class="tag-link" href="/tag/VPS/">VPS</a>, <a class="tag-link" href="/tag/博客/">博客</a>
    
  </span>
</div>

    </article>
  
    

    <article class="post post-type-normal hentry">
      <h2 class="post-title">
        <a href="/do-you-like-me-mysqli-version/">使用 MySQLi 重写 Do you like me</a>
      </h2>

      <div class="post-content">
        
          <p>这次升级 PHP7，一切顺利，到了恢复站点数据的时候，发现<a href="https://prinzeugen.net/do-you-like-me/" target="_blank" rel="noopener">上次搞的</a> “Do you like me?” 不工作了。看了日志发现是 <code>mysql_connect()</code> 这个函数的问题。</p>
<p>看了下文档，原来在 PHP7 中全面移除了 <code>mysql_</code> 系列函数，转而使用 <code>mysqli</code> 或者 PDO。。fuck 劳资皮肤站里都是 mysql_ 系列函数啊啊</p>
<p>上次偷懒用的 LWL12 写的，看来他也没想到这种情况呢。遂使用 mysqli 重写之。</p>
<p>mysqli 改为以面向对象的方式操作数据库，而不是 <code>mysql_</code> 系列函数的面向过程，这点倒是挺好的。</p>
<p>不知道为何原来 LWL12 写的版本单独使用了一个表来存投票数，可能是怕效率问题。不过 <code>SELECT COUNT(*)</code> 在没有指定 WHICH 的时候效率还是蛮高的，参见：<a href="https://www.zhihu.com/question/19641756" target="_blank" rel="noopener">知乎：mysql select count(*) 与 select count(id) 两个执行效率怎样？</a></p>
<p>其实也没改多少，另外把建表的 SQL 也顺便封装在文件里了，托管在 <a href="https://gist.github.com/printempw/48920748b328bacead1b" target="_blank" rel="noopener">Gist</a> 上。</p>
<script src="//work.prinzeugen.net/gist/48920748b328bacead1b.js"></script>

        
      </div>

      <div class="post-meta clf">
  <span class="pmt pms fa-book">
    
      <a class="category-link" href="/categories/tech/">技术</a>
    
  </span>
  <span class="pmt pms fa-clock-o">2016-01-23</span>
  <span class="pmt pms fa-eye">
    <span id="post-view" data="do-you-like-me-mysqli-version/">Loading</span> Hits
  </span>
  <span class="pmt pms extra fa-tag">
    
      <a class="tag-link" href="/tag/PHP/">PHP</a>
    
  </span>
</div>

    </article>
  
    

    <article class="post post-type-normal hentry">
      <h2 class="post-title">
        <a href="/shoshin-wasuru-bekarazu/">不忘初心，方得始终</a>
      </h2>

      <div class="post-content">
        
          <p>如白驹过隙，2015 年已经悄悄离去，新年的钟声已经敲响。</p>
<p>虽然早就过了发年终总结的日子，但本着宁缺毋滥的原则，一直捂着草稿没发，我博客第一次的年度总结，总要搞得有逼格一点。</p>
<h2 id="回首-2015"><a href="#回首-2015" class="headerlink" title="回首 2015"></a>回首 2015</h2><p>2015，毫不夸张的说是我收获最大的一年。去年的 3 月 28 日，不知道哪里来的兴趣，开始折腾起了独立博客。</p>
<p>我从来不是一个喜欢写文学性文字的人，以前不是，将来也应该不会是。开始搭建博客的理由已经不可考，但是我仍然庆幸当初选择了这条道路。</p>
<p>2015 年，我高中一年级。真的只是一个平凡的，刚上完一般的高一课程，终于开始习惯了高中生活的死小孩。</p>
<p>稍微和其他孩子不一样的，也就是我对计算机的兴趣了。嘛，讲的这么高大上，其实就是比起用电脑玩游戏，更喜欢折腾一些乱七八糟的东西。</p>
<p>我绝对不算早接触计算机的那一批人，我的父母也没有那么高瞻远瞩，不过在 2008 年，我还是碰到了人生中第一台电脑。</p>
<p>我至今记得她刚刚被父亲抬回家的样子。</p>
<p>清华同方 真爱 G2000 品牌机，棱角分明，散发出一股冷峻气息的黑色机箱，漂亮的镜面设计的前面板，这么一个酷爆了的铁疙瘩，给那个卧室客厅合一的蜗居和我以后的人生，涂上了浓密重彩的一笔。</p>
<p>她刚刚被请回家时，我凭借着不知道哪里学来的技能将其正确的与那台 14 吋液晶彩电连在一起并且成功点亮了，不过看到的是一个黑黑的屏幕，上面闪烁着光标与一个字符。我在键盘上乱按一通，它也会显示对应的字母。</p>
<p>这和我在别人家里玩的不一样啊，我哭着喊着要父亲拿回店里修。知道那是 DOS，已经是几年后的事情了。</p>
<p>同其他同龄的孩子一样，打 CF 到废寝忘食在我身上也发生过。然而不知道什么时候，甚至连我也没注意到，当我已经把管理 Windows 的文件系统，浏览 system32，折腾美化，优化系统作为一种乐趣的时候，我已经走上了一条不归路。</p>
<p>初中二年级，照理来说应该是在本子上写写画画人物设定，写写右臂封印着黑炎龙的世界第一勇者流落民间扮猪吃老虎一路装逼如风抱得美人归的小说的年纪，但窝不知道从哪里知道了编程这个词汇，并且发现了吴涛大哥的中文编程语言后，我又在这条不归路上前进了一步。</p>
<p>易语言，中文编程从入门到精通，海洋出版社出版。这就是当初我书架上最大部头的一本书了。感谢这本书，虽然现在的我再去看，可能会嗤之以鼻，但是这本书给予了我一个起点，给予了我对编程的兴趣，给予了我完成一个作品的满足感。</p>
<p>感谢这门语言，没有它，就不会有今天的我。愿它可以吸引更多的希望学习编程的中国人初学者踏上这条道路。</p>
          <a class="more-link" href="/shoshin-wasuru-bekarazu/#more">阅读全文&rarr;</a>
        
      </div>

      <div class="post-meta clf">
  <span class="pmt pms fa-book">
    
      <a class="category-link" href="/categories/essay/">随笔</a>
    
  </span>
  <span class="pmt pms fa-clock-o">2016-01-11</span>
  <span class="pmt pms fa-eye">
    <span id="post-view" data="shoshin-wasuru-bekarazu/">Loading</span> Hits
  </span>
  <span class="pmt pms extra fa-tag">
    
      <a class="tag-link" href="/tag/年度总结/">年度总结</a>
    
  </span>
</div>

    </article>
  
    

    <article class="post post-type-normal hentry">
      <h2 class="post-title">
        <a href="/blessing-skin-server-0-1/">Blessing Skin Server 0.1 —— 开源 PHP Minecraft 皮肤站</a>
      </h2>

      <div class="post-content">
        
          <p><img src="https://img.blessing.studio/images/2016/01/2016-01-03_05-22-44.png" alt="bss upload"></p>
<p>很久以前就有想写一个皮肤站的想法了，但是苦于没有时间且 PHP、前端的 coding 都不熟练，所以一直搁置着，当作一个目标。</p>
<p>恰逢前几周稍微有点时间（其实是克服了懒癌），就写了一个皮肤站的原型。PHP + MySQL，表单 POST 数据，基本的登录/注册/上传 功能还是实现了的。但是前端完全没有写，全是 webkit 的默认样式。</p>
<p>不过盼星星盼月亮终于等到了元旦假期（连上周末三天），于是把整个项目重构了一下，并且用鞋拔子写了个稍微能看的页面。</p>
<p>前端页面引用的资源/库均位于根目录下的 <code>/assets</code> 和 <code>/libs</code>，这是不知道从哪里学来的，总之觉得这样挺好的就这样放了（笑）</p>
<p>然后是实现了全站 Ajax，登录/注册 均 POST 请求 <code>check.php</code> 返回 json，加入了 SQL 注入防护（虽然还没有 sqlmap 测试过），加入了基于 IP 的注册数量限制，支持保存 cookie，token 验证自动登录。token 就是使用普通的用于验证的不可逆算法得到（用户名 + MD5 密码 + 盐，MD5 二次加密）。</p>
<p>Ajax 文件上传带 token POST 请求 <code>upload.php</code>，同样返回 json，上次后的文件位于 <code>/uploads</code>。（其实窝觉着这俩可以放一个文件里的）</p>
<p><code>user.php</code> 为用户页面，本来是想用 php 路由到 <code>/user</code> 和 <code>/admin</code> 等子目录的，但是想想还是算了。因为窝对路由之类的理解并不多，边查边写的话窝也没有那么多时间了。准备放在下一个版本里。</p>
<p><code>user.php</code> 中使用了 djazz 的 <a href="http://djazz.se/apps/MinecraftSkin/" target="_blank" rel="noopener">Minecraft Skin Previewer</a> 实现 3D 皮肤预览（就是 skinme 使用的那个），窝将其封装了一下放入了 three.msp.js 中，可以使用类似 <code>MSP.getStatus()</code>、<code>MSP.changeSkin()</code> 的接口来访问。</p>
<p>后端就没啥出彩的地方了（话说前端也没有吧），所有使用了数据库连接的操作均封装为函数放在 <code>connect.php</code> 里面。不过感觉这个放根目录不合适就是了。</p>
<p><code>config.php</code> 中定义了数据库连接信息，站点名称等常量以供调用。这是从 WordPress 那学来的（笑</p>
<p>遗憾的是由于没有时间，后台管理页面还没写，目前只能通过自己管理数据库和文件的方式来管理用户。而且现在的数据表结构也不支持后台管理 qwq</p>
<p>而且前端的 JS 和 CSS 都写得乱糟糟的，CSS 选择器一半是 id 一般是 class，文件关系也没处理好，没有响应式设计，有些地方还用了绝对定位 <img src="https://img.blessing.studio/images/2015/10/2015-10-24_09-56-11.jpg" alt="emotion1"> </p>
<p>不过由于时间所限，这些都放到下一个版本吧~</p>
<hr>
<p>项目开源在 <a href="https://github.com/printempw/blessing-skin-server" target="_blank" rel="noopener">GitHub</a> 上，欢迎 Pull Request~ 在线演示：<a href="https://skin.prinzeugen.net/" target="_blank" rel="noopener">https://skin.prinzeugen.net/</a></p>

        
      </div>

      <div class="post-meta clf">
  <span class="pmt pms fa-book">
    
      <a class="category-link" href="/categories/tech/">技术</a>
    
  </span>
  <span class="pmt pms fa-clock-o">2016-01-03</span>
  <span class="pmt pms fa-eye">
    <span id="post-view" data="blessing-skin-server-0-1/">Loading</span> Hits
  </span>
  <span class="pmt pms extra fa-tag">
    
      <a class="tag-link" href="/tag/Minecraft/">Minecraft</a>, <a class="tag-link" href="/tag/PHP/">PHP</a>, <a class="tag-link" href="/tag/皮肤站/">皮肤站</a>
    
  </span>
</div>

    </article>
  

  
  <div id="p-nav" class="clf">
    <nav class="navigation pagination" role="navigation">
      <div class="nav-links">
          <a class="extend prev" rel="prev" href="/page/7/">Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/9/">Next</a>
      </div>
    </nav>
  </div>






        </div>

        <div id="sidebar" class="fl">

  <div id="abovesb">
    <div class="card">
      <div class="gr center">
        <p id="music-toggle">
          <i class="fa fa-play-circle" aria-hidden="true"></i>
        </p>
        <img src="/images/avatar.jpg" width="112" height="112">
      </div>

      <div class="blogname">Blessing Studio</div>
      <div class="blogdesc">半吊子全栈开发者的日常</div>

      <div class="sbmenu">
        <div class="menu-container">
          <ul class="menu">
  
    
    <li class="menu-item menu-item-friends">
      <a href="/friends" title="友情链接" rel="section">
        <i class="fa fa-link"></i>我的小伙伴们
      </a>
    </li>
  
    
    <li class="menu-item menu-item-about">
      <a href="/about" title="(*ﾟ∀ﾟ*)" rel="section">
        <i class="fa fa-code"></i>关于我
      </a>
    </li>
  
</ul>

        </div>
      </div>
    </div>
    
    <div id="music-player" class="aplayer hide rotated"></div>
  </div>

  <script type="text/javascript">nanobar.go(40);</script>

  <div id="sb">
    
<div id="sbpin">
  
  <div class="clf widget-item widget_text">
    <div class="textwidget">
      <script type="text/javascript" src="https://work.prinzeugen.net/hitokoto/hitokoto.php?encode=javascript"></script>
      <p id="hitokoto"><script>hitokoto();</script></p>
    </div>
  </div>

  
  

</div>

  </div>

</div>

      </div><!-- #container -->

      <div id="foot" class="fw">
        <div id="bottom" class="fw">
  <div id="footer" class="wc center clf">
    <div class="info">
      <p>Copyleft 2018 <a href="https://blessing.studio">Blessing Studio</a>. Proudly published with <a href="https://hexo.io/" target="_blank">Hexo</a>. Made with ❤ by printempw.</p>
    </div>
  </div>
</div>

      </div>

    </div><!-- #pageframe.fw -->
    <script type="text/javascript">nanobar.go(80);</script>

    <div class="back-to-top">
      <span class="fa fa-angle-up"></span>
    </div>

    <script src="/js/jquery-2.2.0.min.js"></script>
<script src="/js/jquery.libs.js"></script>
<script src="/js/highlight.min.js"></script>
<script src="/libs/fancybox/source/jquery.fancybox.pack.js"></script>
<script src="/js/script.js"></script>

    
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-65656002-1', 'auto');
  ga('send', 'pageview');

</script>


    <script type="text/javascript">
    $("a.like-vote").mouseover(function() {
        $("#heart").removeClass("fa-heart-o");
        $("#heart").addClass("fa-heart");
    });

    $("a.like-vote").mouseout(function() {
        $("#heart").removeClass("fa-heart");
        $("#heart").addClass("fa-heart-o");
    });

    $.getJSON("//work.prinzeugen.net/do-you-like-me/like.php?action=get", function (data) {
        $('#count').html(data.like);
    });

    $('.like-vote').click(function () {
        if ($('.like-title').html() === 'Do you like me ?') {
            $.getJSON("//work.prinzeugen.net/do-you-like-me/like.php?action=add", function (data) {
                if (data.success) {
                    $('#count').fadeOut(200);
                    $('#count').html(String(parseInt(data.like)));
                    $('#count').fadeIn(200);
                    $('.like-title').html('我也喜欢你 (*≧▽≦)');
                }
                else {
                    $('.like-title').html('你的爱我已经感受到了~');
                }
            });
        }
    });
</script>

    <style type="text/css">
    .menu-item-kaomoji a {
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select: none;
    }

    .info-rise {
        z-index: 99999;
        position: absolute;
        padding: 0 4px;
        border-radius: 1px;
        background-color: #f69;
        box-shadow: 0 0 1px rgba(0,0,0,0.1);
        color: #fff;
        text-align: center;
        font-size: 12px;
        line-height: 1.5;
        cursor: default
    }
</style>

<script type="text/javascript">
    var kaomoji_array = ["|∀ﾟ", "(´ﾟДﾟ`)", "(;´Д`)", "(｀･ω･)", "(=ﾟωﾟ)=", "| ω・´)", "|-` )", "|д` )", "|ー` )", "|∀` )", "(つд⊂)", "(ﾟДﾟ≡ﾟДﾟ)", "(＾o＾)ﾉ", "(|||ﾟДﾟ)", "( ﾟ∀ﾟ)", "( ´∀`)", "(*´∀`)", "(*ﾟ∇ﾟ)", "(*ﾟーﾟ)", "(　ﾟ 3ﾟ)", "( ´ー`)", "( ・_ゝ・)", "( ´_ゝ`)", "(*´д`)", "(・ー・)", "(・∀・)", "(ゝ∀･)", "(〃∀〃)", "(*ﾟ∀ﾟ*)", "( ﾟ∀。)", "( `д´)", "(`ε´ )", "(`ヮ´ )", "σ`∀´)", " ﾟ∀ﾟ)σ", "ﾟ ∀ﾟ)ノ", "(╬ﾟдﾟ)", "(|||ﾟдﾟ)", "( ﾟдﾟ)", "Σ( ﾟдﾟ)", "( ;ﾟдﾟ)", "( ;´д`)", "(　д ) ﾟ ﾟ", "( ☉д⊙)", "(((　ﾟдﾟ)))", "( ` ・´)", "( ´д`)", "( -д-)", "(>д<)", "･ﾟ( ﾉд`ﾟ)", "( TдT)", "(￣∇￣)", "(￣3￣)", "(￣ｰ￣)", "(￣ . ￣)", "(￣皿￣)", "(￣艸￣)", "(￣︿￣)", "(￣︶￣)", "ヾ(´ωﾟ｀)", "(*´ω`*)", "(・ω・)", "( ´・ω)", "(｀・ω)", "(´・ω・`)", "(`・ω・´)", "( `_っ´)", "( `ー´)", "( ´_っ`)", "( ´ρ`)", "( ﾟωﾟ)", "(oﾟωﾟo)", "(　^ω^)", "(｡◕∀◕｡)", "/( ◕‿‿◕ )\\", "ヾ(´ε`ヾ)", "(ノﾟ∀ﾟ)ノ", "(σﾟдﾟ)σ", "(σﾟ∀ﾟ)σ", "|дﾟ )", "┃電柱┃", "ﾟ(つд`ﾟ)", "ﾟÅﾟ )　", "⊂彡☆))д`)", "⊂彡☆))д´)", "⊂彡☆))∀`)", "(´∀((☆ミつ"];
    var hits = 0;
    var start_time = 0;

    $('.menu-item-kaomoji a').click(function(e) {

        if (start_time == 0) start_time = Date.now();

        hits ++;

        if (hits % 5 === 0) {
            index = Math.floor(Math.random() * kaomoji_array.length);
            $(this).html(kaomoji_array[index]);
        }

        x = $(this).offset().left + $(this).width();
        y = $(this).offset().top + $(this).height();

        if (hits % 50 === 0) {
            var duration = 2000;
            // actions per minite
            var apm = parseInt(hits / ((Date.now() - start_time) / 1000) * 60);
            start_time = 0;
            hits = 0;
            hit = $('<span class="info-rise" style="border: 1px solid #ffd6e4;font-size:13.5px;z-index:9999999;">手速：'+apm+' actions/min </span>');

            console.log('APM: '+apm);
        } else {
            var duration = 500;
            hit = $('<span class="info-rise">+1</span>');
        }

        hit.appendTo($("body"));

        hit.css({
            opacity: 0,
            left: x,
            top: y
        }).animate({
            opacity: 1,
            top: y - 16
        }, 250).animate({
            opacity: 1,
            top: y - 20
        }, duration).animate({
            top: y - 20
        }, duration).animate({
            opacity: 0,
            top: y - 32
        }, 250, function() {
            return $(this).remove();
        });

    });
</script>

    <style type="text/css">
    .p-load-gist {
        margin: 25px 0 25px !important;
        text-align: center;
    }
</style>

<script type="text/javascript">
    $('.load-gist').on('click', function() {
        var gist = {
            url: '//work.prinzeugen.net/gist/printempw/' + $(this).data('hash') + '.json?callback=?',
            dom: this
        };

        $.getJSON(gist.url, function(data) {
            gist.style      = document.createElement('link');
            gist.style.type = 'text/css';
            gist.style.rel  = 'stylesheet';
            gist.style.href = data.stylesheet;

            document.getElementsByTagName('HEAD')[0].appendChild(gist.style);

            $(gist.dom).after(data.div).remove();
        });
    });
</script>

    <script type="text/javascript">
    String.prototype.cleanSlug = function () {
        var search = '/index.html';

        if (this.indexOf(search) === -1) {
            return this.slice(0, -1)
        } else {
            return this.replace(search, '');
        }
    }

    var Counter = function (url) {
        this.baseCounterUrl = url;

        this.initAllPostViews = function () {
            var self = this;

            // 遍历 post-view
            $('[id=post-view]').each(function () {
                // 默认 PV 设为 0
                var span = $(this).html(0);
                var slug = span.attr('data').cleanSlug();

                self.getPostViewBySlug(slug, function (pv) {
                    span.html(pv);
                })
            });
        }

        this.getPostViewBySlug = function (slug, callback) {
            var url = this.baseCounterUrl + '/get/' + slug;

            $.getJSON(url, function (data) {
                callback(data.pv);
            });
        }

        this.incPostViewBySlug = function (slug) {
            var url = this.baseCounterUrl + '/increase/' + slug;

            $.post(url, {}, function (data) {
                $('#post-view').html(data.pv);
            });
        }
    }

    var counter = new Counter('https://work.prinzeugen.net/hexo-view-counter');

    $(document).ready(function () {
        counter.initAllPostViews();
    });
</script>



    <script src="/js/APlayer.min.js"></script>
<script type="text/javascript">
    var player = undefined;

    $.getJSON('https://work.prinzeugen.net/music/play_list.json', function (json) {
        // APlayer.addMusic sucks
        // And APlayer does not provide any method to remove
        // the automatically added music [undefined]
        player = new APlayer({
            element: document.getElementById('music-player'),
            narrow: false,
            autoplay: false,
            showlrc: false,
            mutex: true,
            preload: 'none',
            theme: '#367FA9',
            music: json
        });

        console.log('Music player initialized', json);
    });

    $('#music-toggle').click(function () {
        if (player === undefined) {
            return;
        }

        $('.card').addClass('rotated').addClass('hide');

        // I don't know why APlayer 1.6.0 tends to
        // attach "height: 0px" style to .aplayer-list automatically
        $('.aplayer-list').removeAttr('style')

        $('#music-player').removeClass('hide');

        $('#abovesb').css('padding', 0);

        setTimeout(function () {
            $('#music-player').removeClass('rotated');
        }, 10);
    });

    $('body').on('click', '.aplayer-icon-menu', function () {
        $('.aplayer-list').removeClass('aplayer-list-hide');

        $('#music-player').addClass('rotated').addClass('hide');

        $('.card').removeClass('hide');

        setTimeout(function () {
            $('.card').removeClass('rotated');
        }, 10);

        $('#abovesb').css('padding', '7px 0 1px');
    });
</script>


    

    <script type="text/javascript">nanobar.go(100);</script>
  </body>
</html>
